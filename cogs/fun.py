import random
import discord
from discord.ext import commands

with open("./commands/rm.txt") as file:
    rm_help = file.read()

phrases = [
    "–û–ø—è—Ç—å —ç—Ç–∞ –±–∞–Ω–¥–∞ —Ç–≤–æ—Ä–∏—Ç —à–∏–∑—É...",
    "–ê–∞... —É –Ω–∞—Å —Ç—É—Ç –µ—Å—Ç—å –Ω–µ–∫–æ—Ç–æ—Ä—ã–µ –ª—é–¥–∏, –∫–æ—Ç–æ—Ä—ã–µ —á–∞—Å—Ç–æ –Ω–µ—Å—É—Ç —á—É—à—å.",
    "–ù–æ —ç—Ç–æ –Ω–µ —à—É—Ç–∫–∞... —Ç—É—Ç –Ω–µ—Ç –Ω–∏—á–µ–≥–æ –æ—Ç —à—É—Ç–∫–∏.",
    "–ê—Ö-–æ—Ö...",
    "–ù—É —Ç–æ–ª—å–∫–æ –Ω–µ –æ–ø—è—Ç—å...",
    "–ë–æ–∂–µ...",
    "–ì–æ—Å–ø–æ–¥–∏.",
    "–Ø –Ω–µ –¥—É–º–∞—é, —á—Ç–æ —ç—Ç–æ —Å—Ç–æ–∏–ª–æ –ø–∏—Å–∞—Ç—å —Å—é–¥–∞.",
    "–©–∞ –≤ –º—É—Ç –æ—Ç–ª–µ—Ç–∏—à—å –∑–∞ —Å—Ç—Ä–∞–Ω–Ω–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ –∏ –∫–∞–ø—Å.",
    "*—Ç–∏—Ö–æ–µ –ø—Ä–æ—è–≤–ª–µ–Ω–∏–µ –Ω–µ–¥–æ–≤–æ–ª—å—Å—Ç–≤–∞*",
    "–° –º–µ–Ω—è —É–∂–µ —Ö–≤–∞—Ç–∏—Ç.",
    "–ù–µ —Ö–æ—á—É –æ–ø—è—Ç—å –∑–∞—Ö–æ–¥–∏—Ç—å –≤ —á–∞—Ç –∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—Ç—å, –∫–∞–∫–æ–π —É–∂–∞—Å –≤ —ç—Ç–æ—Ç —Ä–∞–∑ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –∑–¥–µ—Å—å.",
    "–ù–∞–¥–æ–µ–ª–∏ –º–Ω–µ —Ç–≤–æ–∏ –≤—ã—Ö–æ–¥–∫–∏, —É –º–µ–Ω—è –∞–∂ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏—Å–ø–æ—Ä—Ç–∏–ª–æ—Å—å.",
    "–í–æ—Ç –∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø—Ä–æ–ø–∞–ª–æ.",
    "–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –ø–∞—Ä—à–∏–≤–æ–µ –≤–Ω–æ–≤—å.",
    "–ë–æ–∂–µ –º–æ–π, —Ö–≤–∞—Ç–∏—Ç —É–∂–µ.",
    "–°–ø–∞—Å–∏–±–æ –∑–∞ –∏—Å–ø–æ—Ä—á–µ–Ω–Ω–æ–µ –Ω–∞ –≤–µ—Å—å –¥–µ–Ω—å –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ. ",
    "–ù–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ –∏—Å–ø–æ—Ä—á–µ–Ω–æ...",
    "–ú–Ω–µ –∫–∞–∂–µ—Ç—Å—è, –∏–ª–∏ —ç—Ç–æ —Ç–æ—á–Ω–æ –Ω–µ –Ω—É–∂–Ω–æ –∫–∏–¥–∞—Ç—å –≤ —ç—Ç–æ—Ç –∫–∞–Ω–∞–ª...",
    "–ê —ç—Ç–æ —Ç—É—Ç –ø—Ä–∏ —á—ë–º...",
    "–ê —Ç–∞–∫... –∑–∞—á–µ–º —ç—Ç–æ –≤–æ–æ–±—â–µ...",
    "–ú–æ–∂–µ—à—å –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ –º–æ–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ, –µ—Å–ª–∏ –Ω–∞—Å—Ç–æ–ª—å–∫–æ –¥–µ–ª–∞—Ç—å –Ω–µ—á–µ–≥–æ.",
    "–ù—É –∫–∞–∫ –æ–±—ã—á–Ω–æ, –Ω–µ–ª—å–∑—è –Ω–æ—Ä–º–∞–ª—å–Ω–æ –≤–æ—Å–ø—Ä–∏–Ω—è—Ç—å, –Ω—É–∂–Ω–æ –≤—ã—Å–º–µ—è—Ç—å —Ç—É—Ç –∂–µ. <:felms1:1205510982923980831>",
    "–ß—Ç–æ –≤–æ –º–Ω–µ —Ç–∞–∫–æ–≥–æ –æ—Å–æ–±–µ–Ω–Ω–æ–≥–æ?... –Ø –ø—Ä–æ—Å—Ç–æ... –∏—Å–ø–æ—Ä—Ç–∏–ª—Å—è —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º <:blossombud_ugh:1146385811026214942> –ü—Ä–æ–±–ª–µ–º –æ—Ç –º–µ–Ω—è —É–∂–µ –±–æ–ª—å—à–µ, —á–µ–º –ø–æ–ª—å–∑—ã... –ü–æ—Ä—á—É –≤—Å–µ–º –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∏–µ —Å–≤–æ–∏–º –ø—Ä–∏—Å—É—Ç—Å—Ç–≤–∏–µ–º..",
    "–ú–æ—è –ø—Å–∏—Ö–∏–∫–∞ —É–∂–µ —Ä—É—à–∏—Ç—Å—è –∏ —è –Ω–µ –º–æ–≥—É –≤–æ—Å–ø—Ä–∏–Ω–∏–º–∞—Ç—å —Ç–µ–∫—Å—Ç–æ–≤—ã–π —é–º–æ—Ä –ø—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –Ω–∏ –≤ –∫–∞–∫–æ–º –≤–∏–¥–µ. <:felms1:1205510982923980831>",
    "–£–±–µ–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø—Ä–æ—Å—å–±–∞ –ø—Ä–µ–∫—Ä–∞—Ç–∏—Ç—å —Å–ø–∞–º —É–ø–æ–º–∏–Ω–∞–Ω–∏—è–º–∏. –ó–∞—Ä–∞–Ω–µ–µ —Å–ø–∞—Å–∏–±–æ –∑–∞ –ø–æ–Ω–∏–º–∞–Ω–∏–µ.",
    "–ù–µ —Å–ø–æ—Ç–∫–Ω–∏—Å—å –ø–æ –¥–æ—Ä–æ–≥–µ üëã",
    "–í–æ—Ç —ç—Ç–æ —Ç—ã –∑—Ä—è –±—ã–∫–∞–Ω—É–ª. –¢–∞–∫–æ–π –Ω–∞–≥–ª–æ—Å—Ç–∏ —è –Ω–µ –æ–∂–∏–¥–∞–ª –æ—Ç –≤–∞—à–µ–π –ø–µ—Ä—Å–æ–Ω—ã.",
]


class Fun(commands.Cog):
    def __init__(self, bot):
        self.bot = bot

    @commands.command(aliases=["–ü—Ä–∏–≤–µ—Ç", "–ø—Ä–∏–≤–µ—Ç"])
    async def hi(self, ctx):
        await ctx.reply(f"–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π, {ctx.message.author.mention}!")

    @commands.command(aliases=["b–∞n", "–±a–Ω"])
    async def banan(self, ctx, *, reason: str = "None"):
        if not ctx.message.reference:
            return
        original = await ctx.fetch_message(ctx.message.reference.message_id)
        await ctx.reply(
            f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {original.author.mention} –±—ã–ª –∑–∞–±–∞–Ω–µ–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º {ctx.message.author.mention} –ø–æ –ø—Ä–∏—á–∏–Ω–µ `{reason}`"
        )

    @commands.command(aliases=["–≤–∑–æ—Ä–≤–∞–ª—Å—è"])
    async def explode(self, ctx: discord.ApplicationContext):
        msg = []
        async for message in ctx.channel.history(limit=100):
            if message.author == ctx.message.author:
                continue
            if message.author in msg:
                continue
            msg.append(message.author)
        parts = [
            "–ø—Ä–∏–ª–µ—Ç–µ–ª–∞ –≥–æ–ª–æ–≤–∞",
            "–ø—Ä–∏–ª–µ—Ç–µ–ª–∞ –ø—Ä–∞–≤–∞—è —Ä—É–∫–∞",
            "–ø—Ä–∏–ª–µ—Ç–µ–ª–∞ –ª–µ–≤–∞—è —Ä—É–∫–∞",
            "–ø—Ä–∏–ª–µ—Ç–µ–ª–∞ –ø—Ä–∞–≤–∞—è –Ω–æ–≥–∞",
            "–ø—Ä–∏–ª–µ—Ç–µ–ª–∞ –ª–µ–≤–∞—è –Ω–æ–≥–∞",
            "–ø—Ä–∏–ª–µ—Ç–µ–ª–æ —Ç—É–ª–æ–≤–∏—â–µ",
            "–ø—Ä–∏–ª–µ—Ç–µ–ª–æ —Å–µ—Ä–¥—Ü–µ",
            "–ø—Ä–∏–ª–µ—Ç–µ–ª–∏ –≥–ª–∞–∑–∞",
            "–ø—Ä–∏–ª–µ—Ç–µ–ª –º–æ–∑–≥",
            "–ø—Ä–∏–ª–µ—Ç–µ–ª —è–∑—ã–∫",
            "–ø—Ä–∏–ª–µ—Ç–µ–ª–∞ –ø–µ—á–µ–Ω—å",
            "–ø—Ä–∏–ª–µ—Ç–µ–ª –∂–µ–ª—É–¥–æ–∫",
            "–ø—Ä–∏–ª–µ—Ç–µ–ª–∏ –ª—ë–≥–∫–∏–µ",
        ]
        msg = msg[: len(parts) - 1]
        exploded = ""
        for i in range(random.randint(2, 10)):
            safety_limit = 100
            _ = 0
            while _ < safety_limit:
                part = random.choice(parts)
                _ += 1
                if part in exploded:
                    continue
                exploded += f"**–í {random.choice(msg).mention} {part}**\n"
                break
        await ctx.reply(
            f"**{ctx.message.author.mention} –≤–∑–æ—Ä–≤–∞–ª—Å—è!**\n" + exploded.strip(),
            allowed_mentions=discord.AllowedMentions.none(),
        )

    @commands.command(aliases=["—Ñ—Ä–∞–∑–∞-—Ñ–µ–ª–º—Å–∞"])
    async def mood(self, ctx):
        await ctx.reply(random.choice(phrases))

    @commands.Cog.listener()
    async def on_message(self, message):
        if random.randint(1, 200) != 200:
            return
        await message.channel.send(random.choice(phrases), delete_after=30)

    @commands.command(aliases=["rm"])
    async def mood(self, ctx, flags: str = None, directory: str = None):
        if not flags and not directory:
            await ctx.reply(
                "rm: missing operand \n" "Try 'rm --help' for more information."
            )
            return

        if flags == "--help":
            await ctx.reply(rm_help)
            return

        if not flags.startswith("-"):
            if not directory:
                await ctx.reply(
                    f"–§–∞–π–ª {flags} –Ω–µ –Ω–∞–π–¥–µ–Ω–Ω, —Ñ–∞–π–ª {directory} —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–Ω"
                )
                return
            await ctx.reply(f"–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è {flags} –Ω–µ –Ω–∞–π–¥–µ–Ω–Ω–∞")

        if flags == "-rf" and directory == "/*":
            await ctx.reply("–°–∏—Å—Ç–µ–º–∞ —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–Ω–∞! –£–¥–∞—á–Ω–æ–≥–æ –¥–Ω—è!")
            return

        if "r" in flags:
            await ctx.reply(f"–î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è {directory} —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–Ω–∞!")
            return

        await ctx.reply(f"–§–∞–π–ª {directory} —É—Å–ø–µ—à–Ω–æ —É–¥–∞–ª–µ–Ω–Ω!")


def setup(bot):
    bot.add_cog(Fun(bot))
